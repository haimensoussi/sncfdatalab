name: ğŸš€ Deploy Notebooks to Databricks TEST (Direct Config)

on:
  workflow_dispatch:   # ExÃ©cution manuelle
  push:
    branches:
      - main

jobs:
  deploy-to-test:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v3

      - name: âš™ï¸ Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: ğŸ“¦ Install Databricks CLI
        run: pip install databricks-cli

      - name: ğŸš€ Deploy notebooks to Databricks TEST
        env:
          DATABRICKS_HOST: https://adb-4050055950573191.11.azuredatabricks.net/
          DATABRICKS_TOKEN: dapi268dc9598fccee0fbf998cd7b7b68381
        run: |
          echo "Connexion directe Ã  Databricks TEST..."
          databricks workspace ls /
          echo "âœ… Connexion OK"

          echo "DÃ©ploiement des notebooks vers /Shared/sncfdatalab ..."
          databricks workspace import_dir notebooks /Shared/sncfdatalab --overwrite
          echo "âœ… DÃ©ploiement terminÃ© avec succÃ¨s !"
